---
title: "nRF5 SDK (15) - nRF52840-DK SAADC ì œì–´"
categories:
  - nRF5 SDK
tags:
  - nRF5SDK
  - SAADC  
  - AC voltage
  - IoT
  - êµë¥˜ ì „ì••
toc: true
toc_sticky: true
---

## 15. nRF52840-DK SAADC ì œì–´

ì´ë²ˆ í¬ìŠ¤íŒ…ì—ì„œëŠ” **`nRF5 SDK`** ì—ì„œ ì œê³µë˜ëŠ” ì˜ˆì œ ì¤‘ <span style="color:#AA50A0"><b>SAADC</b></span> ê´€ë ¨ ì˜ˆì œë¥¼ ê°„ë‹¨í•˜ê²Œ ì‚´í´ë³´ê³ ì í•œë‹¤.

### 15.1 SAADC in nRF52840 SoC

í˜„ì¬ í•„ìëŠ” íŒì›¨ì–´ ê°œë°œì„ ì£¼ë¡œ í•˜ê³  ìˆì–´ì„œ í•˜ë“œì›¨ì–´ ë¶„ì•¼ì— ëŒ€í•´ì„œëŠ” ì˜ ëª¨ë¥´ì§€ë§Œ, ADC ì„¤ê³„ëŠ” `íŒŒì´í”„ë¼ì¸, ë¸íƒ€-ì‹œê·¸ë§ˆ` ë“± ì–´ëŠ ì •ë„ ìš©ë„ì— ë”°ë¼ ê·œê²©í™”ëœ ëª‡ëª‡ êµ¬ì¡°ê°€ ìˆëŠ” ë“¯ í•˜ë‹¤. ê·¸ ì¤‘ `nRF52` ì‹œë¦¬ì¦ˆì—ëŠ” **`Successive approximation(SA)`** êµ¬ì¡°ë¡œ ì„¤ê³„ëœ 8-channel ADC ê°€ ë‚´ì¥ë˜ì–´ ìˆë‹¤. (*ì°¨ë™ëª¨ë“œ ì ìš©ì‹œ 4-channel*)

ì£¼ìš” ìŠ¤í™ì€ ë‹¤ìŒê³¼ ê°™ìœ¼ë©°, ë³´ë‹¤ ìì„¸í•œ íŠ¹ì„±ì€ ë°ì´í„° ì‹œíŠ¸ë¥¼ ì°¸ê³ í•˜ë©´ ëœë‹¤.

* Maximum sampling rate: `200 kHz`
* Resolution: `8, 10, 12, 14 bits`
* Oversampling: `0, 2 ~ 256x`

---

### 15.2 SAADC example

**`nRF5 SDK`** ëŠ” ëŒ€ë¶€ë¶„ì˜ ì£¼ë³€ê¸°ê¸° í™œìš© ë°©ë²•ì— ëŒ€í•œ ì†ŒìŠ¤ì½”ë“œë¥¼ **...examples/peripherals** í´ë” ë‚´ì—ì„œ ì œê³µí•´ì£¼ê³  ìˆë‹¤.

>ì°¸ê³ ë¡œ í•´ë‹¹ í´ë”ì— ìˆëŠ” ì˜ˆì œ í”„ë¡œì íŠ¸ë“¤ì€ `SoftDevice` ë¥¼ ì‚¬ìš©í•˜ì§€ ì•Šìœ¼ë¯€ë¡œ, **`BLE`** í†µì‹ ì„ í™œì„±í™” í•˜ëŠ” í”„ë¡œì íŠ¸ì˜ ì†ŒìŠ¤ ì½”ë“œì™€ëŠ” ë‹¤ì†Œ ì°¨ì´ê°€ ìˆì„ ìˆ˜ëŠ” ìˆì§€ë§Œ, **`nRF5 SDK`** ì—ì„œ ì œê³µë˜ëŠ” ì£¼ë³€ê¸°ê¸° ë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼ `(e.g. UART, TWI, SPI, SAADC, GPIOTE...)`ë¥¼ ì–´ë–»ê²Œ ì œì–´í•˜ë©´ ë˜ëŠ”ì§€ ëŒ€ëµì ìœ¼ë¡œ ì°¸ê³ í•  ìˆ˜ ìˆë‹¤.

<span style="color:#AA50A0"><b>SAADC</b></span> ì˜ ê²½ìš°ëŠ” ì•„ë˜ì˜ í´ë”ì— ìˆëŠ” í”„ë¡œì íŠ¸ì— ê·¸ í™œìš© ì˜ˆê°€ ì •ë¦¬ë˜ì–´ ìˆë‹¤.

* **nRF5 SDK ë²„ì „: `17.1.0`**

ğŸ“ **`nRF5_SDK.../examples/peripheral/saadc`** 

ë‹¤ìŒì€ ìœ„ í”„ë¡œì íŠ¸ì˜ ì†ŒìŠ¤ ì½”ë“œì˜ **`main`** í•¨ìˆ˜ ë¶€ë¶„ì´ë‹¤.

<div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div><div style="line-height:130%">20</div><div style="line-height:130%">21</div><div style="line-height:130%">22</div><div style="line-height:130%">23</div><div style="line-height:130%">24</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/**</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;*&nbsp;@brief&nbsp;Function&nbsp;for&nbsp;main&nbsp;application&nbsp;entry.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;*/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#066de2">int</span>&nbsp;main(<span style="color:#a71d5d">void</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;uint32_t&nbsp;err_code&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;NRF_LOG_INIT(<span style="color:#0086b3">NULL</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;APP_ERROR_CHECK(err_code);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;NRF_LOG_DEFAULT_BACKENDS_INIT();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ret_code_t&nbsp;ret_code&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;nrf_pwr_mgmt_init();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;APP_ERROR_CHECK(ret_code);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;saadc_init();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;saadc_sampling_event_init();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;saadc_sampling_event_enable();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;NRF_LOG_INFO(<span style="color:#63a35c">"SAADC&nbsp;HAL&nbsp;simple&nbsp;example&nbsp;started."</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">while</span>&nbsp;(<span style="color:#0099cc">1</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;nrf_pwr_mgmt_run();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NRF_LOG_FLUSH();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;}</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

<a></a>

ìœ„ ì†ŒìŠ¤ ì½”ë“œ ì¤‘ í•µì‹¬ì´ ë˜ëŠ” ë¶€ë¶„ì€ ë‹¤ìŒì˜ ì„¸ ì¤„ì´ë‹¤.

<div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">/**</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;*&nbsp;@brief&nbsp;Function&nbsp;for&nbsp;main&nbsp;application&nbsp;entry.</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#999999">&nbsp;*/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#066de2">int</span>&nbsp;main(<span style="color:#a71d5d">void</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//...</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;saadc_init();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;saadc_sampling_event_init();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;saadc_sampling_event_enable();</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;<span style="color:#999999">//...</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

<a></a>

---

### 15.3 SAADC example ì†ŒìŠ¤ì½”ë“œ ë¶„ì„

#### 15.3.1 saadc_init();

ë¨¼ì €, `saadc_init` í•¨ìˆ˜ ë‚´ì—ì„œëŠ” saadc ëª¨ë“ˆì„ ì´ˆê¸°í™” í•˜ëŠ” í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ë©°, ì´ë•Œ ADC ì˜ ê¸°ë³¸ì ì¸ ì±„ë„ ì„¤ì • ê°’ì„ ì…ë ¥í•˜ë„ë¡ ë˜ì–´ìˆë‹¤.

>SE (Single Ended) ëª¨ë“œë¡œ ë™ì‘ì‹œí‚¬ì§€, Differential ëª¨ë“œë¡œ ë™ì‘ì‹œí‚¬ì§€ ë˜í•œ, ì–´ë–¤ í•€ì„ í™œì„±í™” í•  ê²ƒì¸ì§€ ë“±ì„ ì„ íƒí•  ìˆ˜ ìˆìœ¼ë©°, ì•„ë˜ ì˜ˆì œ ì½”ë“œì—ì„œëŠ” ì œê³µë˜ê³  ìˆì§€ ì•Šìœ¼ë‚˜, `nrf_saadc_channel_config_t` íƒ€ì…ì˜ ë³€ìˆ˜ë¥¼ ì´ìš©í•´ì„œ ì¸í„°ëŸ½íŠ¸ì˜ ìš°ì„ ìˆœìœ„ë‚˜, ADC í•´ìƒë„ (`resolution`), ì˜¤ë²„ ìƒ˜í”Œë§ ê¸°ëŠ¥ë“±ì„ ì„¤ì •í•  ìˆ˜ë„ ìˆë‹¤.

<div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div><div style="line-height:130%">19</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">void</span>&nbsp;saadc_init(<span style="color:#a71d5d">void</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ret_code_t&nbsp;err_code;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;nrf_saadc_channel_config_t&nbsp;channel_config&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NRF_DRV_SAADC_DEFAULT_CHANNEL_CONFIG_SE(NRF_SAADC_INPUT_AIN0);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//NRF_SAADC_INPUT_AIN0</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;err_code&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;nrf_drv_saadc_init(<span style="color:#0086b3">NULL</span>,&nbsp;saadc_callback);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;APP_ERROR_CHECK(err_code);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;err_code&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;nrf_drv_saadc_channel_init(<span style="color:#0099cc">0</span>,&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">&amp;</span>channel_config);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;APP_ERROR_CHECK(err_code);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;err_code&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;nrf_drv_saadc_buffer_convert(m_buffer_pool[<span style="color:#0099cc">0</span>],&nbsp;SAMPLES_IN_BUFFER);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;APP_ERROR_CHECK(err_code);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;err_code&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;nrf_drv_saadc_buffer_convert(m_buffer_pool[<span style="color:#0099cc">1</span>],&nbsp;SAMPLES_IN_BUFFER);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;APP_ERROR_CHECK(err_code);</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

<a></a>

ë‹¤ìŒì˜ ê·¸ë¦¼ì€ í•„ìê°€ ë³„ë„ë¡œ êµ¬ì„±í•œ ì˜ˆì œ í”„ë¡œê·¸ë¨ ë‚´ì˜ ì†ŒìŠ¤ ì½”ë“œ ì¤‘ í•˜ë‚˜ ì´ìƒì˜ ADC ì±„ë„ì„ ì´ˆê¸°í™” í•˜ëŠ” ë¶€ë¶„ì˜ ì½”ë“œì´ë‹¤. ì•½ê°„ ìˆ˜ì •ëœ ë¶€ë¶„ì€ ìˆì§€ë§Œ, ê¸°ë³¸ì ì¸ êµ¬ì¡°ëŠ” í•˜ë‚˜ì˜ ADC ì±„ë„ì„ ì´ˆê¸°í™” í•˜ëŠ” ë¡œì§ê³¼ ìœ ì‚¬í•œ ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤

<figure style="width: 100%" class="align-center">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/sdk-adc-fig1.png" alt="">
</figure>

>ì°¸ê³ ë¡œ ADC `init()` í•¨ìˆ˜ ë§ˆì§€ë§‰ ë¶€ë¶„ì„ ë³´ë©´ `nrf_drv_saadc_buffer_convert(,)` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆë‹¤. `nRF5 SDK` ì˜ˆì œì—ì„œ ì´ë¥¼ ë‘ ë²ˆ í˜¸ì¶œí•˜ëŠ” ì´ìœ ì— ëŒ€í•´ì„œëŠ” `Double Buffering` ê¸°ëŠ¥ì„ í™œì„±í™”í•˜ì—¬ ë°ì´í„° ëˆ„ë½ì´ ì—†ë„ë¡ í•˜ê¸° ìœ„í•¨ì´ë¼ í•˜ëŠ”ë°, ì •í™•íˆ ë§ëŠ” ì„¤ëª…ì¸ì§€ëŠ” ëª¨ë¥´ê² ë‹¤. (í•˜ë‚˜ ì´ìƒì˜ ADC ì´ˆê¸°í™” í•  ë•ŒëŠ” `Double Buffering` ì»¨ì…‰ì´ ì œëŒ€ë¡œ ì ìš©ë˜ì§€ ì•Šì•˜ë˜ ê²ƒ ê°™ë‹¤ğŸ˜´)

---

#### 15.3.2 saadc_sampling_event_init();

ë³¸ ì˜ˆì œì—ì„œëŠ” `PPI` ê¸°ëŠ¥ì„ í™œìš©í•´ì„œ ADC ë¥¼ ì œì–´í•˜ëŠ” ë°©ë²•ì„ ë³´ì—¬ì£¼ê³  ìˆìœ¼ë©°, `saadc_sampling_event_init` í•¨ìˆ˜ì—ì„œëŠ” ADC ì´ˆê¸°í™” ì´í›„ `PPI` ê¸°ëŠ¥ì„ ì´ìš©í•´ `ADC` ì™€ `Timer` ë¥¼ ì—°ë™ì‹œí‚¤ëŠ” ì‘ì—…ì„ ìˆ˜í–‰í•œë‹¤.

`PPI` ëŠ” ë…¸ë¥´ë”• ì¹©ì—ì„œ ì œê³µë˜ëŠ” ê¸°ëŠ¥ìœ¼ë¡œ `CPU` ê°œì… ì—†ì´ ë‚´ë¶€ ëª¨ë“ˆ ì‚¬ì´ì˜ **`event`** ì™€ **`task`** ë¥¼ ì—°ë™í•˜ê¸° ìœ„í•´ ì‚¬ìš©ëœë‹¤. **ë³´ë‹¤ ìì„¸í•œ ë‚´ìš©ì€ ì‚¬ìš©í•˜ê³ ì í•˜ëŠ” ë…¸ë¥´ë”• ì¹©ì˜ ë°ì´í„° ì‹œíŠ¸ë¥¼ í™•ì¸í•˜ì.**

<figure style="width: 100%" class="align-center">
  <img src="{{ site.url }}{{ site.baseurl }}/assets/images/sdk-adc-fig2.png" alt="">
</figure>

>ê°€ë ¹, ë³¸ ì˜ˆì œì—ì„œì²˜ëŸ¼ `Timer` ì™€ `ADC` ì‚¬ì´ì˜ ë™ì‘ì„ ì—°ë™ì‹œí‚¤ë©´, `CPU` ê°œì… ì—†ì´  **`Timer` ì˜ ì¹´ìš´í„° ê°’ì´ ì„¤ì •ê°’ì— ë„ë‹¬í–ˆì„ ë•Œ** ë¼ëŠ” **`event`** ê°€ ë°œìƒí•˜ë©´, **`ADC` ì „ì••ì„ ì¸¡ì •í•´ë¼** ë¼ëŠ”  **`task`** ë¥¼ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ê²Œ í•  ìˆ˜ ìˆë‹¤.

ì˜ˆì œì˜ ì†ŒìŠ¤ ì½”ë“œë¥¼ ë³´ë©´ 400 ms ë§ˆë‹¤ `Timer` í‹± (tick)ì´ ë°œìƒí•˜ë„ë¡ ì„¤ì •í•œ ë’¤ì—, í•´ë‹¹ í‹±ì´ ë°œìƒí–ˆì„ ë•Œ (**`event`**), `ADC` ìƒ˜í”Œë§ì„ ìˆ˜í–‰í•˜ë¼ê³  **`task`** ë¥¼ ì„¤ì •í•´ì£¼ëŠ” í•¨ìˆ˜ê°€ ì‘ì„±ë˜ì–´ìˆëŠ” ê²ƒì„ ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

`ADC` ì—°ë™ì´ ë§ˆë¬´ë¦¬ ë˜ë©´, `saadc_sampling_event_enable()` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•´ì„œ í•´ë‹¹ ê¸°ëŠ¥ì„ í™œì„±í™” í•˜ëŠ” ê²ƒìœ¼ë¡œ ìƒ˜í”Œë§ì„ ì‹œì‘í•˜ê²Œ ëœë‹¤.

---

### 15.3.4 í™œìš© ì˜ˆì‹œ

ì•ì„œ ì‚´í´ë³¸ ì˜ˆì œì—ì„œëŠ” `PPI` ê¸°ëŠ¥ì„ í™œìš©í•´ `ADC` ë¥¼ ì¼ì • ì‹œê°„ë§ˆë‹¤ ì œì–´í•˜ê³  ìˆìœ¼ë‚˜, `ADC` ì´ˆê¸°í™” ì´í›„ì— `nrf_drv_saadc_sample();` í•¨ìˆ˜ë¥¼ í˜¸ì¶œí•˜ëŠ” ê²ƒìœ¼ë¡œ ì›í•˜ëŠ” ì‹œì ì— ìƒ˜í”Œë§ì„ ìˆ˜í–‰í•  ìˆ˜ë„ ìˆë‹¤.

ë˜í•œ, ìœ„ ì˜ˆì œì—ì„œì˜ í‹± ê°’ì„ ì¡°ì ˆí•˜ë©´ `CPU` ê°œì… ì—†ì´ë„ ê³ ì†ìœ¼ë¡œ `ADC` ì±„ë„ì˜ ì „ì••ì„ ìƒ˜í”Œë§ í•  ìˆ˜ ìˆëŠ”ë° (ë¬¼ë¡  ì¶©ë¶„í•œ ë²„í¼ë¥¼ í• ë‹¹í•´ë‘ì–´ì•¼í•  ê²ƒì´ë‹¤), ì´ë¥¼ ì´ìš©í•˜ë©´ ì¼ì • ì£¼íŒŒìˆ˜ ë²”ìœ„ ë‚´ì˜ êµë¥˜ ì „ì••ë„ ì¸¡ì •í•´ë³¼ ìˆ˜ ìˆì„ ê²ƒì´ë‹¤.

>êµ­ë‚´ì—ì„œ ì¼ë°˜ ê°€ì •ì— ë³´ê¸‰ë˜ëŠ” êµë¥˜ì˜ ì£¼íŒŒìˆ˜ëŠ” `60 Hz` ì´ë¯€ë¡œ ì´ˆë‹¹ 120 ê°œ ì´ìƒì˜ ìƒ˜í”Œì„ ì¸¡ì •í•´ì„œ ì €ì¥í•˜ë©´ ì›ë³¸ íŒŒí˜•ì„ ë³µì›í•  ìˆ˜ ìˆì„ ê²ƒì´ë‹¤. ì‹¤ì œë¡œ í…ŒìŠ¤íŠ¸ í•´ë³´ë©´, ì´ˆë‹¹ `1000` ê°œì˜ ìƒ˜í”Œ ì¸¡ì • ì‹œ (ì¸¡ì • ê°„ê²©ì„ `1 ms` ë¡œ ì„¤ì •) ë³„ë„ì˜ í›„ì†ì²˜ë¦¬ ì—†ì´ë„ ì›ë³¸ íŒŒí˜•ì— ê°€ê¹Œìš´ ê·¸ë˜í”„ê°€ ì–»ì–´ì§ì„ í™•ì¸í•´ë³¼ ìˆ˜ ìˆì—ˆë‹¤

* ì†ŒìŠ¤ì½”ë“œ ì ìš© ì˜ˆì‹œ

<div class="colorscripter-code" style="color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important; position:relative !important;overflow:auto"><table class="colorscripter-code-table" style="margin:0;padding:0;border:none;background-color:#fafafa;border-radius:4px;" cellspacing="0" cellpadding="0"><tr><td style="padding:6px;border-right:2px solid #e5e5e5"><div style="margin:0;padding:0;word-break:normal;text-align:right;color:#666;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="line-height:130%">1</div><div style="line-height:130%">2</div><div style="line-height:130%">3</div><div style="line-height:130%">4</div><div style="line-height:130%">5</div><div style="line-height:130%">6</div><div style="line-height:130%">7</div><div style="line-height:130%">8</div><div style="line-height:130%">9</div><div style="line-height:130%">10</div><div style="line-height:130%">11</div><div style="line-height:130%">12</div><div style="line-height:130%">13</div><div style="line-height:130%">14</div><div style="line-height:130%">15</div><div style="line-height:130%">16</div><div style="line-height:130%">17</div><div style="line-height:130%">18</div></div></td><td style="padding:6px 0;text-align:left"><div style="margin:0;padding:0;color:#010101;font-family:Consolas, 'Liberation Mono', Menlo, Courier, monospace !important;line-height:130%"><div style="padding:0 6px; white-space:pre; line-height:130%"><span style="color:#a71d5d">void</span>&nbsp;saadc_sampling_event_init(<span style="color:#a71d5d">void</span>)</div><div style="padding:0 6px; white-space:pre; line-height:130%">{</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;ret_code_t&nbsp;err_code;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;...</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">/*&nbsp;setup&nbsp;m_timer&nbsp;for&nbsp;compare&nbsp;event&nbsp;every&nbsp;400ms&nbsp;*/</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;uint32_t&nbsp;ticks&nbsp;<span style="color:#ff3399"></span><span style="color:#a71d5d">=</span>&nbsp;nrf_drv_timer_ms_to_ticks(<span style="color:#ff3399"></span><span style="color:#a71d5d">&amp;</span>m_timer,&nbsp;<span style="color:#0099cc">1</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;nrf_drv_timer_extended_compare(<span style="color:#ff3399"></span><span style="color:#a71d5d">&amp;</span>m_timer,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NRF_TIMER_CC_CHANNEL0,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;ticks,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;NRF_TIMER_SHORT_COMPARE0_CLEAR_MASK,</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#a71d5d">false</span>);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;nrf_drv_timer_enable(<span style="color:#ff3399"></span><span style="color:#a71d5d">&amp;</span>m_timer);</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;&nbsp;&nbsp;&nbsp;<span style="color:#999999">//&nbsp;...</span></div><div style="padding:0 6px; white-space:pre; line-height:130%">&nbsp;</div><div style="padding:0 6px; white-space:pre; line-height:130%">}</div></div><div style="text-align:right;margin-top:-13px;margin-right:5px;font-size:9px;font-style:italic"><a href="http://colorscripter.com/info#e" target="_blank" style="color:#e5e5e5text-decoration:none">Colored by Color Scripter</a></div></td><td style="vertical-align:bottom;padding:0 2px 4px 0"><a href="http://colorscripter.com/info#e" target="_blank" style="text-decoration:none;color:white"><span style="font-size:9px;word-break:normal;background-color:#e5e5e5;color:white;border-radius:10px;padding:1px">cs</span></a></td></tr></table></div>

<a></a>

<!---
<span style="color:#A0a020"><b></b></span>
--->